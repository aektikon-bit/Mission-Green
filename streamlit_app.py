import streamlit as st
import random

st.set_page_config(page_title="Mission Green ЁЯМ▒", layout="centered")

st.title("ЁЯМ▒ Mission Green")

# -----------------------------
# р╕кр╕гр╣Йр╕▓р╕З session state р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Ар╕Бр╣Зр╕Ър╕Др╕░р╣Бр╕Щр╕Щ
# -----------------------------
if 'score' not in st.session_state:
    st.session_state.score = 0

if 'step' not in st.session_state:
    st.session_state.step = 1

# -----------------------------
# р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Др╕░р╣Бр╕Щр╕Щ
# -----------------------------
def update_score(points):
    st.session_state.score += points
    st.session_state.step += 1

# -----------------------------
# р╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕Бр╕▓р╕гр╕Ур╣Мр╣Ар╕Бр╕бр╕Хр╕▓р╕б step
# -----------------------------
if st.session_state.step == 1:
    st.subheader("р╕ар╕▓р╕гр╕Бр╕┤р╕И 1: р╕Ыр╕ер╕╣р╕Бр╕Хр╣Йр╕Щр╣Др╕бр╣Й ЁЯМ│")
    st.write("р╣Ар╕ер╕╖р╕нр╕Бр╕Ир╕│р╕Щр╕зр╕Щр╕Хр╣Йр╕Щр╣Др╕бр╣Йр╕Чр╕╡р╣Ир╕Др╕╕р╕Ур╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Ыр╕ер╕╣р╕Бр╕зр╕▒р╕Щр╕Щр╕╡р╣Й")
    trees = st.slider("р╕Ир╕│р╕Щр╕зр╕Щр╕Хр╣Йр╕Щр╣Др╕бр╣Й", 1, 10, 3)
    if st.button("р╕Ыр╕ер╕╣р╕Б"):
        points = trees * random.randint(5,10)
        st.success(f"р╕Др╕╕р╕Ур╕Ыр╕ер╕╣р╕Б {trees} р╕Хр╣Йр╕Щр╣Др╕бр╣Й! р╣Др╕Фр╣Йр╕Др╕░р╣Бр╕Щр╕Щ {points}")
        update_score(points)

elif st.session_state.step == 2:
    st.subheader("р╕ар╕▓р╕гр╕Бр╕┤р╕И 2: р╕ер╕Фр╕Вр╕вр╕░р╕Юр╕ер╕▓р╕кр╕Хр╕┤р╕Б тЩ╗я╕П")
    choice = st.radio("р╕Др╕╕р╕Ур╕Ир╕░р╕Чр╕│р╕нр╕░р╣Др╕г?", ["р╕гр╕╡р╣Др╕Лр╣Ар╕Др╕┤р╕е", "р╣Гр╕Кр╣Йр╕Лр╣Йр╕│", "р╣Др╕бр╣Ир╕Чр╕│р╕нр╕░р╣Др╕г"])
    if st.button("р╕вр╕╖р╕Щр╕вр╕▒р╕Щ"):
        points = {"р╕гр╕╡р╣Др╕Лр╣Ар╕Др╕┤р╕е": random.randint(10,20), "р╣Гр╕Кр╣Йр╕Лр╣Йр╕│": random.randint(5,15), "р╣Др╕бр╣Ир╕Чр╕│р╕нр╕░р╣Др╕г": 0}[choice]
        st.success(f"р╕Др╕╕р╕Ур╣Ар╕ер╕╖р╕нр╕Б '{choice}'! р╣Др╕Фр╣Йр╕Др╕░р╣Бр╕Щр╕Щ {points}")
        update_score(points)

elif st.session_state.step == 3:
    st.subheader("р╕ар╕▓р╕гр╕Бр╕┤р╕И 3: р╣Ар╕ер╕╖р╕нр╕Бр╕Юр╕ер╕▒р╕Зр╕Зр╕▓р╕Щр╕кр╕░р╕нр╕▓р╕Ф тЪб")
    choice = st.selectbox("р╕Др╕╕р╕Ур╕Ир╕░р╣Ар╕ер╕╖р╕нр╕Бр╕Юр╕ер╕▒р╕Зр╕Зр╕▓р╕Щр╣Бр╕Ър╕Ър╣Др╕лр╕Щ?", ["р╣Вр╕Лр╕ер╕▓р╕гр╣М", "р╕ер╕б", "р╕Щр╣Йр╕│", "р╕Цр╣Ир╕▓р╕Щр╕лр╕┤р╕Щ"])
    if st.button("р╕вр╕╖р╕Щр╕вр╕▒р╕Щ"):
        points = {"р╣Вр╕Лр╕ер╕▓р╕гр╣М":20, "р╕ер╕б":15, "р╕Щр╣Йр╕│":10, "р╕Цр╣Ир╕▓р╕Щр╕лр╕┤р╕Щ":0}[choice]
        st.success(f"р╕Др╕╕р╕Ур╣Ар╕ер╕╖р╕нр╕Б '{choice}'! р╣Др╕Фр╣Йр╕Др╕░р╣Бр╕Щр╕Щ {points}")
        update_score(points)

else:
    st.subheader("ЁЯПЖ Mission Complete!")
    st.success(f"р╕Др╕░р╣Бр╕Щр╕Щр╕гр╕зр╕бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф: {st.session_state.score} / 100")
    if st.session_state.score >= 60:
        st.balloons()
        st.write("ЁЯОЙ р╕вр╕┤р╕Щр╕Фр╕╡р╕Фр╣Йр╕зр╕в! р╕Др╕╕р╕Ур╕Кр╣Ир╕зр╕вр╣Вр╕ер╕Бр╣Др╕Фр╣Йр╕кр╕│р╣Ар╕гр╣Зр╕И ЁЯМНЁЯТЪ")
    else:
        st.write("ЁЯШв р╕Др╕╕р╕Ур╕Хр╣Йр╕нр╕Зр╕Юр╕вр╕▓р╕вр╕▓р╕бр╕бр╕▓р╕Бр╕Бр╕зр╣Ир╕▓р╕Щр╕╡р╣Йр╣Гр╕Щр╕Бр╕▓р╕гр╕Кр╣Ир╕зр╕вр╣Вр╕ер╕Б")
    if st.button("р╣Ар╕гр╕┤р╣Ир╕бр╣Гр╕лр╕бр╣И"):
        st.session_state.score = 0
        st.session_state.step = 1
